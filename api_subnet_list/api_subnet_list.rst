.. _api_subnet_list:

----------------------
API: サブネットの一覧を取得
----------------------

概要
++++++++

この演習では受講者のかたにクラスターが持つサブネットの一覧を表示してもらいます。
後ほどの演習ではここで取得するサブネットのUUIDが必要となります。

.. note::

  想定演習時間: **5 分**



演習: AHVのサブネット一覧を取得
+++++++++++++++++++++++++++++++++++++++++++

#. Postmanの「+」ボタンをクリックして新しいリクエストタブを作成してください。

#. HTTPメソッドのドロップダウンをクリックしPOSTを選択してください。

    - Nutanix API v3 はPOSTメソッドを使ってサーバーサイドでのフィルター、グルーピング、ソートをほどこした要素のリストを提供します。

#. サブネットの一覧を得るために以下のURLをクリックしてください。

    - https://{{prism_central_ip}}:9440/api/nutanix/v3/subnets/list

#. API呼び出しのためにベーシック認証の設定をしてください。

    - 最初の演習と同じステップで設定してください。
    - v3 APIはHTTPをステートレスなプロトコルとして扱うので、ベーシック認証はアクセスのたびにおこなわれます。

#. メディアタイプを「JSON」にします。

    - Bodyタブをクリック。
    - ラジオボタン(選択ボタン)でrawを選択します。
    - Textのドロップダウンをクリックし、JSONを選択します。

#. ボディを設定します。

    - 以下をコピーもしくは入力して、ボディに空の辞書データを与えてください。

    .. code-block:: bash

      {}

    .. figure:: images/apimetajson.png

#. Sendボタンを押して v3 API を呼び出してください。

  - レスポンスにクラスターが持つサブネットの一覧が含まれています。
  - metadata という項目にある **Primary** というネットワークのUUIDを取得してください。

  .. figure:: images/subnetuuid.png
