.. _api_vm_status:

----------------------
API: 仮想マシンのステータス
----------------------

概要
++++++++

.. note::

  想定演習時間: **5 分**


演習: 仮想マシンステータスの取得
++++++++++++++++++++

#. Postmanの + ボタンをクリックして、新しいリクエストタブを作成してください。

#. HTTPメソッドにGETが選択されていることを確認してください。

#. 仮想マシンのステータスを得るためにURLを入力してください。

    - 前回の演習と同じURLから開始されます: https://{{prism_central_ip}}:9440/api/nutanix/v3/vms
    - URLの後ろに仮想マシンのUUIDを「/{{uuid}}」として加えてください。このUUIDは仮想マシンを作成した際に得られたものです。

    .. figure:: images/appenduuid.png

#. リクエストにベーシック認証の設定をします。

    - 前回までの演習と全く同じ手順で設定してください。
    - v3 API はHTTPをステートレス(状態がない)なプロトコルとして扱います。そのため、認証はAPIの呼び出しごとに毎回おこなわれます。

#. Sendボタンを押して v3 API を呼び出してください。

    - レスポンスには2つの重要なパートが含まれています。:
        - Status(ステータス)には現在のエンティティ(要素)の状態が含まれています。
        - Spec(スペック)にはユーザーが望む最終的な状態が記載されています。
    - Statusに含まれるState(ステート)には、エンティティが現在の状態から望まれる最終的な状態に遷移できているかが示されています。
    - もしステートが「COMPLETE」ではなく「PENDING」であれば、もういちどSendをクリックして状態を取得してください。

    .. figure:: images/getstatus.png
